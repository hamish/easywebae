/*
Copyright (c) 2003-2009, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/

CKEDITOR.dialog.add('paste',function(a){var b=CKEDITOR.env.ie&&document.domain!=window.location.hostname,c='cke_'+CKEDITOR.tools.getNextNumber(),d=b?"javascript:void((function(){document.open();document.domain='"+document.domain+"';"+'document.write( window.parent.CKEDITOR._htmlToLoad );'+'document.close();'+'document.body.contentEditable = true;'+'delete window.parent.CKEDITOR._htmlToLoad;'+'window.focus();'+'})())':'javascript:void(0)',e='<iframe src="'+d+'"'+' id="'+c+'"'+' style="width:346px;background-color:white;height:130px;border:1px solid black"'+' frameborder="0"'+' allowtransparency="1">'+'</iframe>',f='<!doctype html><script type="text/javascript">window.onload = function(){'+(CKEDITOR.env.ie?'document.body.contentEditable = "true";':'document.designMode = "on";')+'window.focus();'+'};'+'window.onerror = function()'+'{'+'return true;'+'};'+'</script><body style="margin:3px"></body>';return{title:a.lang.clipboard.title,minWidth:400,minHeight:330,onShow:function(){if(b)CKEDITOR._htmlToLoad=f;else{var g=CKEDITOR.document.getById(c),h=g.$.contentWindow.document;h.open();h.write(f);h.close();g.$.contentWindow.focus();}},onOk:function(){var g=CKEDITOR.document.getById(c),h=new CKEDITOR.dom.element(g.$.contentDocument?oBody=g.$.contentDocument.body:oBody=g.$.contentWindow.document.body),i=h.getHtml(),j=new RegExp(window.location+'#','g');i=i.replace(j,'#');this.restoreSelection();this.clearSavedSelection();this.getParentEditor().insertHtml(i);},contents:[{id:'general',label:a.lang.common.generalTab,elements:[{type:'html',id:'securityMsg',html:'<div style="white-space:normal;width:340px;">'+a.lang.clipboard.securityMsg+'</div>'},{type:'html',id:'pasteMsg',html:'<div style="white-space:normal;width:340px;">'+a.lang.clipboard.pasteMsg+'</div>'},{type:'html',id:'content',style:'width:340px;height:130px',html:'<div>'+e+'</div>'}]}]};});
